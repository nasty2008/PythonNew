

   # Ð’ÑÐ¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ñƒ 3 Ð¸Ð· Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð³Ð¾ ÑÐµÐ¼Ð¸Ð½Ð°Ñ€Ð°: 
# ÐœÑ‹ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð»Ð¸ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» Ñ Ð¿ÑÐµÐ²Ð´Ð¾ Ð¸Ð¼ÐµÐ½Ð°Ð¼Ð¸ Ð¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸ÐµÐ¼ Ñ‡Ð¸ÑÐµÐ».

#  ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÐ¾Ð·Ð´Ð°Ñ‘Ñ‚ Ð¸Ð· ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ€Ð°Ð½ÐµÐµ Ñ„Ð°Ð¹Ð»Ð° Ð½Ð¾Ð²Ñ‹Ð¹ Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ JSON. 
#  Ð˜Ð¼ÐµÐ½Ð° Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð±ÑƒÐºÐ²Ñ‹. 
#  ÐšÐ°Ð¶Ð´ÑƒÑŽ Ð¿Ð°Ñ€Ñƒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐ¹Ñ‚Ðµ Ñ Ð½Ð¾Ð²Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸.

import json


def toJson():
    myDict = {}
    with open(f"c:\\Users\\User\\Desktop\\Seminar8\\Untitled-1.txt", "r", encoding="utf-8") as nf :
        while res := nf.readline():
            myList = res.replace("\n", "").upper().split(' | ')
            myDict[myList[0]] = myList[1]
        nn.close()
    print(myDict)
    with open(f"c:\\Users\\User\\Desktop\\Seminar8\\new_user.json", 'w', encoding="utf-8") as f:
        result = json.dumps(myDict, indent=2, separators=(',', ':'), sort_keys=True)
        f.write(result)
        f.close()

toJson()



# ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð² Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð¼ Ñ†Ð¸ÐºÐ»Ðµ:
#       - Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ Ð¸Ð¼Ñ, 
#       - Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ 
#       - ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° (Ð¾Ñ‚ 1 Ð´Ð¾ 7). 
#  ðŸ“Œ ÐŸÐ¾ÑÐ»Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð° Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐ¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð² JSON Ñ„Ð°Ð¹Ð». 
#  ðŸ“Œ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ Ð¿Ð¾ ÑƒÑ€Ð¾Ð²Ð½ÑŽ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°.
#  ðŸ“Œ Ð˜Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð²Ñ‹ÑÑ‚ÑƒÐ¿Ð°ÐµÑ‚ ÐºÐ»ÑŽÑ‡Ñ‘Ð¼ Ð´Ð»Ñ Ð¸Ð¼ÐµÐ½Ð¸. 
#  ðŸ“Œ Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹ Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ Ð¾Ñ‚ ÑƒÑ€Ð¾Ð²Ð½Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°. 
#  ðŸ“Œ ÐŸÑ€Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÑƒÐ¶Ðµ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ðµ Ð² Ñ„Ð°Ð¹Ð» Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑ‚ÑŒÑÑ.

import json


def getAccessLevel():
    accessLevels = ['1', '2', '3', '4', '5', '6', '7']

    with open('access_file.json', 'r', encoding='utf-8') as read_access:
        myDict = json.load(read_access)                             # Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°
        print(myDict)
        read_access.close()

        while True:                                                                    # Ð·Ð°Ð¿ÑƒÑÐ¸Ñ‚ÑŒ Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ»: Ð¿Ð¾ÐºÐ° ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ ÐµÑÑ‚ÑŒ...
            ident = input("Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€: ")
            if ident in myDict.keys() :                                        # ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„-Ñ€ Ð² ÐºÐ»ÑŽÑ‡Ð°Ñ… ÑÐ»Ð¾Ð²Ð°Ñ€Ñ, Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
                print("Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ ÑƒÐ¶Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ")
            else :
                while True:
                    access = input(f"Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ñ {min(accessLevels)} Ð¿Ð¾ {max(accessLevels)} : ")
                    if access not in accessLevels :
                        print ("Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð²Ð²Ð¾Ð´")
                    else :
                        myDict[ident] = access
                        sortedDict = dict(sorted(myDict.items(), key=lambda item: item[1], reverse=True))  # ÐµÑÐ»Ð¸ reverse=True, Ñ‚Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ‡Ð¸ÑÐ»Ð¾Ð²Ð¾Ð³Ð¾ ÑÐ¿Ð¸ÑÐºÐ° Ð¾Ñ‚ÑÐ¾Ñ€Ñ‚ Ð¿Ð¾ ÑƒÐ±Ñ‹Ð²Ð°Ð½Ð¸ÑŽ 
                        print(sortedDict)

                        with open('access_file.json', 'w', encoding="utf-8") as write_access:
                            new_entry = json.dumps(sortedDict, indent=2, separators=(',', ':'))
                            write_access.write(new_entry)
                            write_access.close()
                            break
                break

getAccessLevel()




#  ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ 
#    ðŸ“Œ Ð¸Ñ‰ÐµÑ‚ json Ñ„Ð°Ð¹Ð»Ñ‹ Ð² ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
#    ðŸ“Œ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð¸Ñ… ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ð² Ð²Ð¸Ð´Ðµ Ð¾Ð´Ð½Ð¾Ð¸Ð¼Ñ‘Ð½Ð½Ñ‹Ñ… pickle Ñ„Ð°Ð¹Ð»Ð¾Ð².

import json
import pickle

def search_jsonfiles():
    file = 'new_user.json'
    with open(f'c:\\Users\\User\\Desktop\\Seminar8\\new_user.json', 'r', encoding='utf-8') as readers_dir:
        list_direct = json.load(readers_dir)
        readers_dir.close()

    with open(f'c:\\Users\\User\\Desktop\\Seminar8\\new_user.pickle', 'wb') as writes:
        writ_namefile = pickle.dump(writ_namefile, writes)        # Ð² Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð¸ Ñ„Ð°Ð¹Ð»
        writes.close()

search_jsonfiles()


#  ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÑ‚ pickle Ñ„Ð°Ð¹Ð», 
#  Ñ…Ñ€Ð°Ð½ÑÑ‰Ð¸Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº ÑÐ»Ð¾Ð²Ð°Ñ€ÐµÐ¹ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ csv Ñ„Ð°Ð¹Ð». 
### ðŸ“Œ Ð”Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð²Ð¾Ð·ÑŒÐ¼Ð¸Ñ‚Ðµ pickle Ð²ÐµÑ€ÑÐ¸ÑŽ Ñ„Ð°Ð¹Ð»Ð° Ð¸Ð· Ð·Ð°Ð´Ð°Ñ‡Ð¸ 4 ÑÑ‚Ð¾Ð³Ð¾ ÑÐµÐ¼Ð¸Ð½Ð°Ñ€Ð°. 
###ðŸ“Œ Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð¸Ð·Ð²Ð»ÐµÐºÐ°Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡Ð¸ ÑÐ»Ð¾Ð²Ð°Ñ€Ñ Ð´Ð»Ñ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¾Ð² ÑÑ‚Ð¾Ð»Ð±Ñ†Ð° Ð¸Ð· Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°.

import csv
import pickle
from pathlib import Path


def pickle2csv(file: Path) -> None:
    with (
        open(file, 'rb') as f_read,
        open(f'{file.stem}.csv', 'w', newline='', encoding='utf-8') as f_write,
    ):
        data = pickle.load(f_read)
        
        keys = list(data[0].keys())
        csv_write = csv.DictWriter(f_write, fieldnames=keys, dialect='excel-tab', quoting=csv.QUOTE_NONNUMERIC)
        
        csv_write.writeheader()
        csv_write.writerows(data)


if __name__ == '__main__':
    pickle2csv(Path('new_users.pickle'))